import pkg from "pg";
const { Pool } = pkg;

if (!process.env.DATABASE_URL) {
  throw new Error("‚ùå DATABASE_URL missing");
}

// MARKETAI DB CLIENT RULES:
// - One Pool instance only
// - Named export only (no default export)
// - ssl: false (Railway handled by connection string / environment)

export const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: false
});
