import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 8080;

// === AUTO-ROUTE-IMPORTS-START ===
import aiTipsRoutes from './routes/ai-tips';
import aiRoutes from './routes/ai';
import aiTipsLegacyRoutes from './routes/aiTips_legacy';
import allCollectionRoutesRoutes from './routes/allCollectionRoutes';
import analysisRoutesRoutes from './routes/analysisRoutes';
import analyticsRoutesRoutes from './routes/analyticsRoutes';
import anomalyRoutesRoutes from './routes/anomalyRoutes';
import authRoutes from './routes/auth';
import brainRoutes from './routes/brain';
import cacheRoutesRoutes from './routes/cacheRoutes';
import calendarRoutes from './routes/calendar';
import collectorRoutesRoutes from './routes/collectorRoutes';
import commandCenterRoutesRoutes from './routes/commandCenterRoutes';
import comprehensiveAnalysisRoutesRoutes from './routes/comprehensiveAnalysisRoutes';
import comprehensiveCollectorRoutesRoutes from './routes/comprehensiveCollectorRoutes';
import confidenceRoutesRoutes from './routes/confidenceRoutes';
import correlationRoutesRoutes from './routes/correlationRoutes';
import cryptoCorrelationRoutesRoutes from './routes/cryptoCorrelationRoutes';
import currencyRoutesRoutes from './routes/currencyRoutes';
import dailyIntelligenceRoutes from './routes/dailyIntelligence';
import dailyIntelligenceRoutesRoutes from './routes/dailyIntelligenceRoutes';
import dailySummaryRoutesRoutes from './routes/dailySummaryRoutes';
import dashboardRoutesRoutes from './routes/dashboardRoutes';
import dataRoutes from './routes/data';
import dataCollectionRoutes from './routes/dataCollection';
import dataCollectionRoutesRoutes from './routes/dataCollectionRoutes';
import debugRoutes from './routes/debug';
import debugEnvRoutes from './routes/debugEnv';
import debugFmpRoutes from './routes/debugFmp';
import deepDiveRoutesRoutes from './routes/deepDiveRoutes';
import diagnosticsRoutesRoutes from './routes/diagnosticsRoutes';
import digestRoutes from './routes/digest';
import digestCleanupRoutes from './routes/digestCleanup';
import digestRoutesRoutes from './routes/digestRoutes';
import divergenceRoutesRoutes from './routes/divergenceRoutes';
import enhancedDeepDiveRoutesRoutes from './routes/enhancedDeepDiveRoutes';
import eventIntelligenceRoutesRoutes from './routes/eventIntelligenceRoutes';
import eventsRoutes from './routes/events';
import executiveSummaryRoutesRoutes from './routes/executiveSummaryRoutes';
import fundamentalsRoutesRoutes from './routes/fundamentalsRoutes';
import futuresRoutes from './routes/futures';
import gameRoutes from './routes/game';
import gammaRoutesRoutes from './routes/gammaRoutes';
import healthRoutes from './routes/health';
import historyRoutesRoutes from './routes/historyRoutes';
import ingestionRoutesRoutes from './routes/ingestionRoutes';
import insiderRoutesRoutes from './routes/insiderRoutes';
import intelligenceRoutes from './routes/intelligence';
import intelligenceThreadsRoutesRoutes from './routes/intelligenceThreadsRoutes';
import journalRoutes from './routes/journal';
import learningRoutes from './routes/learning';
import liveStatusRoutesRoutes from './routes/liveStatusRoutes';
import marketRoutes from './routes/market';
import marketPriceRoutesRoutes from './routes/marketPriceRoutes';
import metaRoutesRoutes from './routes/metaRoutes';
import multiAgentRoutesRoutes from './routes/multiAgentRoutes';
import narrativeRoutesRoutes from './routes/narrativeRoutes';
import neuralChatRoutesRoutes from './routes/neuralChatRoutes';
import newsRoutes from './routes/news';
import opportunitiesRoutes from './routes/opportunities';
import optionsRoutes from './routes/options';
import pairsRoutesRoutes from './routes/pairsRoutes';
import paperTradingRoutesRoutes from './routes/paperTradingRoutes';
import portfolioRoutes from './routes/portfolio';
import processorRoutesRoutes from './routes/processorRoutes';
import realDeepDiveRoutesRoutes from './routes/realDeepDiveRoutes';
import realTimeRoutesRoutes from './routes/realTimeRoutes';
import regimeRoutesRoutes from './routes/regimeRoutes';
import researchRoutes from './routes/research';
import riskRoutesRoutes from './routes/riskRoutes';
import scheduledIngestionRoutesRoutes from './routes/scheduledIngestionRoutes';
import schedulerRoutesRoutes from './routes/schedulerRoutes';
import sentimentRoutesRoutes from './routes/sentimentRoutes';
import shadowLiquidityRoutesRoutes from './routes/shadowLiquidityRoutes';
import smartMoneyRoutesRoutes from './routes/smartMoneyRoutes';
import socialIntelligenceRoutesRoutes from './routes/socialIntelligenceRoutes';
import socialRoutesRoutes from './routes/socialRoutes';
import socialSentimentRoutesRoutes from './routes/socialSentimentRoutes';
import systemRoutes from './routes/system';
import systemAlertRoutesRoutes from './routes/systemAlertRoutes';
import systemStatusRoutesRoutes from './routes/systemStatusRoutes';
import technicalRoutes from './routes/technical';
import technicalRoutesRoutes from './routes/technicalRoutes';
import tickerVettingRoutesRoutes from './routes/tickerVettingRoutes';
import tradingOpportunitiesRoutes from './routes/tradingOpportunities';
import tradingOpportunitiesRoutesRoutes from './routes/tradingOpportunitiesRoutes';
import unifiedIntelligenceRoutesRoutes from './routes/unifiedIntelligenceRoutes';
import userPortfolioRoutesRoutes from './routes/userPortfolioRoutes';
import watchlistRoutes from './routes/watchlist';
// === AUTO-ROUTE-IMPORTS-END ===

app.use(cors());
app.use(express.json());

app.get('/', (req, res) => {
  res.json({
    status: 'MarketAI Backend Online',
    timestamp: new Date().toISOString(),
  });
});

// === AUTO-ROUTE-USE-START ===
app.use('/api/ai-tips', aiTipsRoutes);
app.use('/api/ai', aiRoutes);
app.use('/api/aiTips_legacy', aiTipsLegacyRoutes);
app.use('/api/allCollectionRoutes', allCollectionRoutesRoutes);
app.use('/api/analysisRoutes', analysisRoutesRoutes);
app.use('/api/analyticsRoutes', analyticsRoutesRoutes);
app.use('/api/anomalyRoutes', anomalyRoutesRoutes);
app.use('/api/auth', authRoutes);
app.use('/api/brain', brainRoutes);
app.use('/api/cacheRoutes', cacheRoutesRoutes);
app.use('/api/calendar', calendarRoutes);
app.use('/api/collectorRoutes', collectorRoutesRoutes);
app.use('/api/commandCenterRoutes', commandCenterRoutesRoutes);
app.use('/api/comprehensiveAnalysisRoutes', comprehensiveAnalysisRoutesRoutes);
app.use('/api/comprehensiveCollectorRoutes', comprehensiveCollectorRoutesRoutes);
app.use('/api/confidenceRoutes', confidenceRoutesRoutes);
app.use('/api/correlationRoutes', correlationRoutesRoutes);
app.use('/api/cryptoCorrelationRoutes', cryptoCorrelationRoutesRoutes);
app.use('/api/currencyRoutes', currencyRoutesRoutes);
app.use('/api/dailyIntelligence', dailyIntelligenceRoutes);
app.use('/api/dailyIntelligenceRoutes', dailyIntelligenceRoutesRoutes);
app.use('/api/dailySummaryRoutes', dailySummaryRoutesRoutes);
app.use('/api/dashboardRoutes', dashboardRoutesRoutes);
app.use('/api/data', dataRoutes);
app.use('/api/dataCollection', dataCollectionRoutes);
app.use('/api/dataCollectionRoutes', dataCollectionRoutesRoutes);
app.use('/api/debug', debugRoutes);
app.use('/api/debugEnv', debugEnvRoutes);
app.use('/api/debugFmp', debugFmpRoutes);
app.use('/api/deepDiveRoutes', deepDiveRoutesRoutes);
app.use('/api/diagnosticsRoutes', diagnosticsRoutesRoutes);
app.use('/api/digest', digestRoutes);
app.use('/api/digestCleanup', digestCleanupRoutes);
app.use('/api/digestRoutes', digestRoutesRoutes);
app.use('/api/divergenceRoutes', divergenceRoutesRoutes);
app.use('/api/enhancedDeepDiveRoutes', enhancedDeepDiveRoutesRoutes);
app.use('/api/eventIntelligenceRoutes', eventIntelligenceRoutesRoutes);
app.use('/api/events', eventsRoutes);
app.use('/api/executiveSummaryRoutes', executiveSummaryRoutesRoutes);
app.use('/api/fundamentalsRoutes', fundamentalsRoutesRoutes);
app.use('/api/futures', futuresRoutes);
app.use('/api/game', gameRoutes);
app.use('/api/gammaRoutes', gammaRoutesRoutes);
app.use('/api/health', healthRoutes);
app.use('/api/historyRoutes', historyRoutesRoutes);
app.use('/api/ingestionRoutes', ingestionRoutesRoutes);
app.use('/api/insiderRoutes', insiderRoutesRoutes);
app.use('/api/intelligence', intelligenceRoutes);
app.use('/api/intelligenceThreadsRoutes', intelligenceThreadsRoutesRoutes);
app.use('/api/journal', journalRoutes);
app.use('/api/learning', learningRoutes);
app.use('/api/liveStatusRoutes', liveStatusRoutesRoutes);
app.use('/api/market', marketRoutes);
app.use('/api/marketPriceRoutes', marketPriceRoutesRoutes);
app.use('/api/metaRoutes', metaRoutesRoutes);
app.use('/api/multiAgentRoutes', multiAgentRoutesRoutes);
app.use('/api/narrativeRoutes', narrativeRoutesRoutes);
app.use('/api/neuralChatRoutes', neuralChatRoutesRoutes);
app.use('/api/news', newsRoutes);
app.use('/api/opportunities', opportunitiesRoutes);
app.use('/api/options', optionsRoutes);
app.use('/api/pairsRoutes', pairsRoutesRoutes);
app.use('/api/paperTradingRoutes', paperTradingRoutesRoutes);
app.use('/api/portfolio', portfolioRoutes);
app.use('/api/processorRoutes', processorRoutesRoutes);
app.use('/api/realDeepDiveRoutes', realDeepDiveRoutesRoutes);
app.use('/api/realTimeRoutes', realTimeRoutesRoutes);
app.use('/api/regimeRoutes', regimeRoutesRoutes);
app.use('/api/research', researchRoutes);
app.use('/api/riskRoutes', riskRoutesRoutes);
app.use('/api/scheduledIngestionRoutes', scheduledIngestionRoutesRoutes);
app.use('/api/schedulerRoutes', schedulerRoutesRoutes);
app.use('/api/sentimentRoutes', sentimentRoutesRoutes);
app.use('/api/shadowLiquidityRoutes', shadowLiquidityRoutesRoutes);
app.use('/api/smartMoneyRoutes', smartMoneyRoutesRoutes);
app.use('/api/socialIntelligenceRoutes', socialIntelligenceRoutesRoutes);
app.use('/api/socialRoutes', socialRoutesRoutes);
app.use('/api/socialSentimentRoutes', socialSentimentRoutesRoutes);
app.use('/api/system', systemRoutes);
app.use('/api/systemAlertRoutes', systemAlertRoutesRoutes);
app.use('/api/systemStatusRoutes', systemStatusRoutesRoutes);
app.use('/api/technical', technicalRoutes);
app.use('/api/technicalRoutes', technicalRoutesRoutes);
app.use('/api/tickerVettingRoutes', tickerVettingRoutesRoutes);
app.use('/api/tradingOpportunities', tradingOpportunitiesRoutes);
app.use('/api/tradingOpportunitiesRoutes', tradingOpportunitiesRoutesRoutes);
app.use('/api/unifiedIntelligenceRoutes', unifiedIntelligenceRoutesRoutes);
app.use('/api/userPortfolioRoutes', userPortfolioRoutesRoutes);
app.use('/api/watchlist', watchlistRoutes);
// === AUTO-ROUTE-USE-END ===

app.use((err, req, res, next) => {
  console.error('Unhandled Error:', err);
  res.status(500).json({ error: 'Internal Server Error', message: err.message });
});

app.listen(PORT, () => {
  console.log(`ðŸš€ Server running on port ${PORT}`);
  console.log(`ðŸ‘‰ http://localhost:${PORT}`);
});

export default app;
